---
layout: single
title: "댓글에 댓글을 달 수 있는 방법"
date: 2023-04-19 08:58:41 +0900
categories: java
tags: [Comment, Reply, Soft Delete]
typora-root-url: ../
---

## 댓글에 댓글을 달 수 있는 방법
> - 기획 고민

<br>

## 기획 고민

### 댓글(comment) 기능 추가 하기

프로젝트 기획을 할 때 댓글에 대댓글을 달 수 있게끔 구상

문제는 대댓글이 달려있는 댓글이 삭제되었을 때 대댓글을 어떻게 할 것인가

과거에는 부모 댓글이 삭제되면 자식 댓글도 모두 함께 삭제되는 방식

최근에는 부모 댓글이 삭제되어도 자식 댓글이 담고 있는 정보의 삭제를 막기 위해, 부모 댓글의 내용을 "삭제된 댓글입니다."로 변경

### 부모 댓글을 삭제하면 내용만 변경 후 그대로 유지

댓글 저장 시 필요한 내용 

1. 댓글id : PK
2. 부모 댓글id : FK
3. 게시글id
4. 작성자id
5. 댓글 내용
6. 삭제 여부

댓글 삭제 시 댓글ID만 있으면 삭제 가능

삭제 방식은 데이터 레코드의 완전 삭제가 아닌, Soft-Delete 방식

#### Soft delete

일반적으로 소프트웨어 개발에서 데이터의 삭제는 물리적인 삭제가 아니라 논리적인 삭제 의미

Soft delete는 데이터베이스 레코드를 삭제하지 않고 삭제된 것처럼 처리하는 기술

##### 장점

1. 삭제된 데이터를 복원 가능
2. 데이터 무결성 유지
3. 데이터베이스의 성능 향상 가능

##### 단점

1. 삭제된 데이터가 여전히 데이터베이스에 남아있어서, 데이터베이스가 커질 수 있음
2. 삭제된 데이터를 복원하려면 복원 프로세스를 수행해야 함

<br>

## 


<br>
